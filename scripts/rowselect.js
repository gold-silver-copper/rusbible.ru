/* (c) www.rusbible.ru 2016  */
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('f 3H="58.57",2H="1U.s 1U.i",3w="1U.s a.56",2W="1U.s",2y="1U.s .20 26",3R=".3v,a,.s .20 26";f 3U=".2g,.T,.1z,.22,.3X,.3W";f H={},1g=y;f 18,1p,1P,19,2e,1Q,1J=0,2G=0,2D=0,1e=-2,1d=-2,1A;f 2U=0;f 1n={},1Z={};f L="",1C;f 2Z="3N";f 30,31=55;$.3V.Z=l(1T){f q,o=$(C).54(0);1T=1T||5;3h(o&&1T>0){f 37=o.53;c(3Q 37=="52"&&37.1l(/(^|\\s)(2g|T|1z|22|3X|3W)(\\s|$)/)){q=o.51("q");q=q.1Y(/\\\\\\./g,".");1x}o=o.50;1T--}u(!q||q===3f)?y:("#"+3y(q))};$.3V.E=l(1S,4Z){1S=1S||"3T";f G=$(C).3A(3U);f A=G.3z({4Y:M.10.1z,4X:M.10.22,4W:M.10.T,36:M.10.N,35:M.10.3n});c(A===y)u $([]);c(1S=="G"){c(A.1v=="36"||A.1v=="35")u G;v u G.1a(".s:2P")}f 3S={3T:" .i",X:" .20"};c(A.1v!="36"&&A.1v!="35")G=G.1a("."+A.1v);f A=G.1a(3S[1S]);u A};l 3M(){f 34,33=0;B(34 1c H){c(H[34]){33++;1x}}u 33}f 2j;l 39(){$(3R).3B("4V",0);2j=D}c(3Q 3P===\'4U\'||!3P)$(l(){l 2i(){30=(31&&W($("3r").4T())<31)}l 2L(w){c(30)u;f 1j;c(1e==-2){1j=$(".4S:27");1e=!1j.r?-1:1j.U().x}c(1d==-2){1j=$(".4R:27");1d=!1j.r?-1:(1j.U().x+1j.P())}c(1e<0&&1d<0)u;f o=w.E().U();c(!o)u;f t=o.x;c(1d>=0&&t<1d){w.E("X").Y("x",(1d-t)+\'2Y\');u D}f h=w.E("X").P();c(1e>=0&&t+h>1e){w.E("X").Y("x",(1e-h-t)+\'2Y\');u D}}l 2f(O,S,14){c(!14)14=$(S);f s=$(14);c(O){c(2O(S,0,D).r){u}2L(s);s.1L("3O")}v{s.1M("3O")}f Q=H[S]||0;c((Q&1)||(2Z=="4Q")||(2Z=="3N"&&3M()&&O))u;c(O){f 3L=3C(S);B(f i=0,p;p=3L[i];i++){f w=$(p.z).E("X");c(W(w.Y("x"))!==p.29)w.Y("x",p.29+\'2Y\')}s.1L("1r")}v{c(!s.1V("38")){2I();s.1M("1r")}}}l 2V(3K,3J,2X,3I){f 1i=3K-2X,1R=3J-3I;u!2X||2F.2E(1i)<5||(1i>0&&(1R>1i/2||-1R>1i*3/2))||(1i<0&&(1R>-1i/2||-1R>-1i*3/2))}f 17=$(3H);17.O("4P",2W,l(e){c(1J)u;c(18){2m(18);18=y}f 3G=e.2C;c(3G===2e){1p=e.1f;u}f 14=C,S=$(14).Z(2);c(19==S){1p=e.1f;u}f G=l(){c(19!==y)2f(0,19,1Q);19=S;2e=e.2C;1p=e.1f;1P=e.1w;1Q=14;c(S!==y)2f(1,S,14)};c(2V(e.1f,e.1w,1p,1P)){c(2U)1B(G,0);v G()}v 18=1B(G,2k)});17.O("4O",2W,l(e){c(1J)u;c(18){2m(18);18=y}f 2d=l(){c(19!==y)2f(0,19,1Q);19=y;2e=y;1Q=y;1p=e.1f;1P=e.1w};f 14=C,S=$(14).Z(2);c(S!==19){c(2V(e.1f,e.1w,1p,1P)){c(2U)1B(2d,0);v 2d()}v{18=1B(2d,2k)}}});l 1y(){f 2R={},1o=[];c(1g!==y)u 1g;1g=[];B(f 12 1c H){f 2T=$(12),2S=2T.E();c(2S.r!==1)16;f 3F=2T.E("X"),2c=2S.U().x,3E=3F.P();2R[2c]={z:12,x:2c,P:3E,1O:H[12]};1o[1o.r]=2c}c(1o.r){1o.4N(l(a,b){u a-b});B(f i=0;i<1o.r;i++){1g[1g.r]=2R[1o[i]]}}u 1g}l 2I(3D){B(f 12 1c H){c(3D===12)16;f o=$(12).E("X");c(W(o.Y("x"))!==0)o.Y("x","4M")}}l 2O(q,U,2P){f w=$(q),A=[],K=1y();c(!K.r)u A;f 2Q=w.E().U();c(2Q){f t=2Q.x,h=-1;B(f i=0,p;p=K[i];i++){c(!(p.1O&1)||p.z==q)16;c(p.x+p.P<t)16;c(h==-1)h=w.E("X").P();c(p.x>t+h+(U||0))1x;A[A.r]=p.z;c(2P)1x}}u A}l 2B(z,U){f o=2O(z,U);B(f i=0;i<o.r;i++){I(o[i],2,y,D)}}l 1K(){f K=1y();B(f i=0,p;p=K[i];i++){f 28=D,2a=-1;B(f j=i+1,2b;2b=K[j];j++){f 2N=(p.x+p.P>2b.x);c(2N)2a=j;c(!(2b.1O&1))16;c(2N)28=y;1x}c(28&&!(p.1O&1))I(p.z,3,y,D);c(2a!=-1)i=2a}}l 3u(){f K=1y(),2M=0;B(f i=0,p;p=K[i];i++){c(!(p.1O&1))16;c(p.x<2M)I(p.z,2,y,D);v 2M=p.x+p.P}}l 3C(q){f w=$(q);f A=[];f K=1y();c(!1y.r)u A;f o=w.E().U();c(!o)u A;f t=o.x,h=-1,1h=-1;B(f i=0,p;p=K[i];i++){c(p.x<t){1h=i;16}1x}f J=t;B(f i=1h,p;p=K[i];i--){c(p.x+p.P>J){A.2u({z:p.z,29:J-p.P-p.x});J=J-p.P}}1h++;c(K[1h]&&K[1h].z==q)1h++;J=t+w.E("X").P();B(f i=1h,p;p=K[i];i++){c(p.x<J){A.2u({z:p.z,29:J-p.x});J=J+p.P}}u A}l I(z,Q,2K,2J){c(2K){B(f 12 1c H){c(12==z)16;I(12,0,y,D)}}f w=$(z);c(w.r!=1)u;f 1N=w.E("G",1);f J=H[z]||0;c(!2L(w))w.E("X").Y("x","0");w.E("X").3B("4L","O");c(!2J&&!2K&&!(Q&1)&&(J&2)&&!(J&1))u I(z,3,y);1g=y;c(Q&1)1N.1L("1r");v 1N.1M("1r");c(Q&2)1N.1L("1q");v 1N.1M("1q");c(Q)H[z]=Q;v 1E H[z];c(!2J){c(Q&1){2I(z);2B(z)}v{1K()}}c(3x){f d=w.3A(".T").3z(M.10.T);f p=$.4K(M.10.4J,3y(d));c(Q==0)p.1M("1q");v{p.1L("1q");c(d)3x.28(d.T)}}}17.O("3q",2H,l(e){2G=e.1f;2D=e.1w});17.O("3p",2H,l(e){c(2F.2E(2G-e.1f)>5||2F.2E(2D-e.1w)>5)u;c($.4I(e.2C,"a"))u;f q=$(C).Z();I(q,((H[q]||0)&2)?0:3,!e.3b)});17.O("1D",3w,l(e){f q=$(C).Z();I(q,3,1)});17.O("4H",".3v",l(e){c(e.1k==9){I($(C).Z(),3,D)}});$(25).4G(l(){1e=-2;1d=-2;3u();1K();2i()});17.O("1D",2y,l(e){f t=$(C).2A("2z").1a("4F");f p=$(C).Z();c(t.4E(":27").r){t.4D(l(){$(C).2A("2z").1a("26 3t").Y("3s","27");1K()})}v{2B(p,4C);I(p,3,y,D);t.4B(l(){$(C).2A("2z").1a("26 3t").Y("3s","4A");1K()})}});17.O("3a",2y,l(e){c(25.4z)u;c(e.1k==32||e.1k==43||e.1k==4y||e.1k==13){e.4x();e.4w();$(C).1D()}});f 1W=$("3r");1W.3q(l(e){1J=1}).3p(l(e){1J=0;c(1A){f 1I;c(25.3o){1I=25.3o().4v()}v c(1H.1G.24){1I=1H.1G.24().1I}c(1I.r){1A=2;B(f 1u 1c H){c(H[1u]&&(H[1u]&2)){1Z[1u]=D}}I(y,0,D);c(1H.1G&&1H.1G.24){f 2x=1H.1G.24(),2t=2x.4u,2w=2x.4t(),21={};c(2w){f 2v=$(2w).Z();c(2v)21[2v]=D}2t.1Y(/\\2p=\\"?([a-4s-4r-]+)\\"?/g,l(a,q){f 3l=1X.3i(M.10,q);f 3m={1z:1,22:1,T:1,N:1,3n:1};c(3m[3l.1v])21["#"+q]=D});B(f q 1c 21){c(1n[q])16;f 3k=1n[q]=[];$(q).E("G").1a(".20,.m").2h(l(i,w){3k.2u(w)}).4q()}}}v{1A=0;B(f q 1c 1n){B(f i=0;i<1n[q].r;i++){f 3j=$(q).E("G");3j.4p(1n[q][i].4o(D))}1E 1n[q]}B(f 1u 1c 1Z){I(1u,2)}1Z={}}}}).4n(l(e){l 2l(){c(L.1l(/^[0-9\\.:,;\\<\\>бю]+$/i)){f 1s,N,m,1F=4m.4l.1Y(/^[^\\/]*\\//,"").1Y(/^\\//,"");f 2s="2t/4k.4j/";c(1F.4i(2s)===0){1F=1F.V(2s.r)}f R=1X.3i(M.2o,1F);c(R&&R.4h){f 1t,4g=R.T&&!R.3e;3h(!1t){c(m=L.1l(/^([0-9]*)[\\.,;:\\<\\>бю]+([0-9]*)$/)){c(m[1].r)1s=m[1];c(m[2].r)N=m[2];1t=1}v c(m=L.1l(/^([0-9]+)$/)){f n=m[1],F=-1,1b=W(n.V(0,1)),1m=W(n.V(1,1)),2r=W(n.V(2,1)),3g=W(n.V(n.r-1,1));c(n.r==1)F=1;v c(3g===0)F=n.r>5?3:n.r-2;v c(n.r>=5&&n.r<=6)F=n.r-2;v c(n.r==2)F=1;v c(n.r==4){c(1b>1||W(n.V(0,2))>=15)F=2;v c(2r===0||W(n.V(n.r-2,2))>=4f)F=3;v c(2r<=3)F=2}v c(n.r==3){c(1m===0)F=2;v c(1m===1&&1b>=4)F=1;v c((1m===9&&1b!==8)||(1m===8&&(1b>=9||1b<=5))||(1m===7&&(1b<=5))||(1m===6&&(1b<=4)))F=2}c(F>=0){c(F<n.r)N=W(n.V(F));c(F>0)1s=W(n.V(0,F));1t=1}v{c(n.r<=2)L=n+":";v L=n.V(0,n.r-2)+":"+n.V(n.r-2)}}c(!1t){f 2q=4e("Не могу однозначно определить номер стиха и главы\\nПожалуйста, введите в формате виде 11:23",L);c(2q===3f)1t=1;v L=2q}}c(1s||N){1E R.3e;1E R.4d;1E R.N;c(1s)R.T=1s;c(N)R.4c=N;f o,q=1X.3c(N?M.10.N:M.10.T,R);c(q){q="#"+q;f w=$(q);c(w.r){f 2p=w.Z();I(2p,2,y);c(4b&&$.3d){$.3d(q);o=D}v{o=w.U();c(o)4a(o.x)}}}c(!o){f 2n=1X.3c(N?M.2o.N:M.2o.T,R,1);c(2n)49("/"+2n)}}}}v c(L.1l(/^[nт]+$/i)){$("a.48").1D()}v c(L.1l(/^[bи]+$/i)){$("a.J").1D()}L=""}c(1C){2m(1C);1C=y}f k=e.1k||e.47;c(k===13)2l();v{f s=46.45(k);L+=s;1C=1B(2l,L.1l(/[0-9]/)?44:2k)}});1W.42("41",l(e){c(e.3b)u y;1A=1});c(1){1W.3a(l(e){c(2j||e.1k!==9)u;39()})}c(0){$(".1r,.1q").2h(l(){f Q=($(C).1V("1r")||$(C).1V("38")?1:0)|($(C).1V("1q")?2:0);I($(C).Z(),Q,D)})}2i()});$(l(){$(".40.1z").2h(l(){c($(C).1a(".2g").r==0)$(C).Y("3Z","3Y")})});',62,319,'||||||||||||if|||var||||||function|||||id|length|||return|else|item|top|false|idx|ret|for|this|true|selectedSub|slice|sel|hlighted|select|prev|plist|typed|patterns|verse|on|height|state|parts|selid|chapter|offset|substr|parseInt|more|css|selectedId|idis||pinid||self||continue|sla|hovertid|hoverid|find|n0|in|nohoverbot|nohovertop|pageX|poslist|ti|dx|tio|keyCode|match|n1|delfrags|spos|hoverx|hlight|pinmore|chap|found|hid|pcode|pageY|break|hpos|book|noselmode|setTimeout|tmrtyped|click|delete|href|selection|document|text|mdowned|showOldOverlapped|addClass|removeClass|handle|hl|hovery|hsel|dy|what|limit|div|hasClass|bd|pparser|replace|onselhidden|mo|deleted|bookcap||createRange|window|dt|visible|show|shift|ovi|p2|t2|unsel|hoveruid|curmark|tl|each|checktablet|tabset|500|gotyped|clearTimeout|nr|pages|sid|nv|n3|pfx|html|push|upid|upper|range|selside|dl|parent|hideOverlapping|target|selclicky|abs|Math|selclickx|selhandler|restoreShifted|child|drop|setNohoverShift|bottom|ov|overlapped|first|to|pos|o2|pnd|delayhover|harea|selcont|ox|px|hlpreview|istablet|tabletwidth||hnum|someid|subline|line|classes|pinmorefrv|setTabindex|keydown|ctrlKey|build|scrollTo|tochapter|null|nl|while|parsemany|trg|df|idd|selids|subverse|getSelection|mouseup|mousedown|body|visibility|span|hideOverlapped|ts|selhere|pagesbar|dq|iddata|closest|attr|getshifts|but|h2|m2|seluid|selarea|oy|ny|nx|shifts|someHlighted|notpinned|hoverline|selectOff|typeof|seltab|subs|handler|idsel|fn|groupcap|infoblock|none|display|commentary|selectstart|bind||2000|fromCharCode|String|charCode|next|goref|scrollToPos|usescroll|no|toverse|prompt|90|single|code|indexOf|ru|rusbible|pathname|location|keypress|cloneNode|append|remove|9_|z0|parentElement|htmlText|toString|stopPropagation|preventDefault|107|opera|hidden|slideDown|300|slideUp|filter|dd|resize|keyup|nodeName|chapterpage|dataitem|unselectable|0px|sort|mouseout|mouseover|never|nohovert|nohoverb|width|undefined|tabindex|chapheader|bookcapheader|bookheader|test|parentNode|getAttribute|string|className|get|580|here|content|td'.split('|'),0,{}))
